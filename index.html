<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Drawing with Turtle in Brython</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <style>
        body {
            background-color: black;
        }
        canvas {
            border: 1px solid black;
            background-color: black;
        }
    </style>
</head>
<body onload="brython()">
    <canvas id="mycanvas" width="600" height="600"></canvas>
    <script type="text/python">
        from browser import document, window
        from math import sqrt, pi, cos, sin

        # Configurar canvas y contexto
        canvas = document["mycanvas"]
        context = canvas.getContext("2d")

        class Turtle:
            def __init__(self, canvas, context):
                self.canvas = canvas
                self.context = context
                self.x = canvas.width // 2
                self.y = canvas.height // 2
                self.angle = 0
                self.color = "#FFA216"

            def goto(self, x, y):
                self.x = x
                self.y = y

            def forward(self, distance):
                new_x = self.x + distance * cos(self.angle * pi / 180)
                new_y = self.y + distance * sin(self.angle * pi / 180)
                self.context.beginPath()
                self.context.moveTo(self.x, self.y)
                self.context.lineTo(new_x, new_y)
                self.context.strokeStyle = self.color
                self.context.stroke()
                self.x, self.y = new_x, new_y

            def right(self, angle):
                self.angle -= angle

            def left(self, angle):
                self.angle += angle

            def circle(self, radius, extent=None):
                steps = int(abs(radius * pi * (extent or 360) / 180))
                step_length = 2 * pi * radius / steps
                step_angle = (extent or 360) / steps
                for _ in range(steps):
                    self.forward(step_length)
                    self.left(step_angle)

            def penup(self):
                self.context.beginPath()

            def pendown(self):
                self.context.closePath()

            def setcolor(self, color):
                self.color = color

            def hideturtle(self):
                pass

            def done(self):
                pass

        turtle = Turtle(canvas, context)
        turtle.goto(300, 300)

        # Dibujar hojas
        for i in range(16):
            for j in range(18):
                turtle.setcolor('#FFA216')
                turtle.right(90)
                turtle.circle(150 - j * 6, 90)
                turtle.left(90)
                turtle.circle(150 - j * 6, 90)
                turtle.right(180)
            turtle.circle(40, 24)

        # Dibujar centro de la flor
        turtle.setcolor('black')
        golden_ang = 137.508
        phi = golden_ang * (pi / 180)

        for i in range(140):
            r = 4 * sqrt(i)
            theta = i * phi
            x = 300 + r * cos(theta)
            y = 300 + r * sin(theta)
            turtle.penup()
            turtle.goto(x, y)
            turtle.pendown()
            turtle.context.beginPath()
            turtle.context.arc(x, y, 2, 0, 2 * pi)
            turtle.context.fillStyle = '#8B4513'
            turtle.context.fill()

        turtle.hideturtle()
        turtle.done()

    </script>
</body>
</html>
